
<!DOCTYPE html
  >
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja"><head><meta charset="UTF-8"/><title>ARIA21: エラー項目を示すために aria-invalid を使用する | WCAG 2.0 達成方法集
              </title><link rel="stylesheet" type="text/css" href="https://www.w3.org/StyleSheets/TR/2016/W3C-WG-NOTE.css"/><link rel="stylesheet" type="text/css" href="additional.css"/><link rel="stylesheet" type="text/css" href="slicenav.css"/></head><body class="slices toc-inline"><div id="masthead"><p class="logo"><a href="http://www.w3.org/"><img width="72" height="48" alt="W3C" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C"/></a></p><p class="collectiontitle"><a href="Overview.html">WCAG 2.0 達成方法集</a></p></div><div id="skipnav"><p class="skipnav"><a href="#maincontent">Skip to Content (Press Enter)</a></p></div><a name="top"> </a><!-- TOP NAVIGATION BAR --><ul id="navigation"><li><strong><a href="Overview.html#contents" title="Table of Contents">目次</a></strong></li><li><strong><a href="intro.html" title="Introduction to Techniques for WCAG 2.0"><abbr title="Introduction">イントロダクション</abbr></a></strong></li><li><a title="ARIA20: ページの領域を特定するために region ロールを使用する" href="ARIA20.html"><strong>前: </strong>
        達成方法 ARIA20</a></li><li><a title="Flash テクノロジーノートflash_notes: " href="flash_notes.html"><strong>次: </strong>Flash テクノロジーノート
        達成方法 flash_notes</a></li></ul><div class="navtoc"><p>このページのコンテンツ:</p><ul id="navbar"><li><a href="#ARIA21-disclaimer">達成方法に関する重要な情報</a></li><li><a href="#ARIA21-applicability">適用（対象）</a></li><li><a href="#ARIA21-description">解説</a></li><li><a href="#ARIA21-examples">事例</a></li><li><a href="#ARIA21-resources">参考リソース</a></li><li><a href="#ARIA21-related-techs">関連する達成方法</a></li><li><a href="#ARIA21-tests">検証</a></li></ul></div><div class="skiptarget"><a id="maincontent">-</a></div> <h1><a name="ARIA21" id="ARIA21"> </a>ARIA21: エラー項目を示すために aria-invalid を使用する</h1><div id="ARIA21-disclaimer"><h2>達成方法に関する重要な情報</h2><p>これらの達成方法(参考)の使用法及び、それらがWCAG 2.0 達成基準(規定)とどのように関係するかに関する重要な情報については、<a href="http://waic.jp/docs/UNDERSTANDING-WCAG20/understanding-techniques.html">WCAG 達成基準の達成方法を理解する</a>を参照のこと。適用（対象）セクションは、その達成方法の範囲について説明しており、特定の技術に関する達成方法があるからといって、WCAG 2.0 を満たすコンテンツを作成する際に、常にその技術が使用可能であるわけではない。</p></div><div class="applicability"><h2 id="ARIA21-applicability">適用（対象）</h2><div class="textbody"><p><a href="http://www.w3.org/TR/wai-aria/">Accessible Rich Internet Applications (WAI-ARIA)</a>を用いるHTML。</p></div></div><p class="referenced">これは、次の達成基準に関連する達成方法である:</p><ul><li><a href="http://waic.jp/docs/WCAG20/Overview.html#minimize-error-identified">
				達成基準 3.3.1 (エラーの特定)</a><ul><li><a href="http://www.w3.org/WAI/WCAG20/quickref/20150226/#minimize-error-identified">
						How to Meet 3.3.1 (エラーの特定)
					</a></li><li><a href="http://waic.jp/docs/UNDERSTANDING-WCAG20/minimize-error-identified.html">
						達成基準 3.3.1 (エラーの特定)を理解する
					</a></li></ul></li></ul><h2 id="ARIA21-description">解説</h2><div class="textbody"><p>この達成方法は、<code>aria-invalid</code>を使用して、検証に失敗しているフィールドを明確に識別する方法を示す。次の場合が最も使用に適している:</p><ul><li><p>エラーの説明から、失敗したフィールドをプログラムによって識別できない。</p></li><li><p>失敗したフィールドが、一部の利用者に利用できない方法で――たとえば、色に依存しない、ボーダーのような視覚的な手がかりなどの技術によって視覚的にレンダリングされるエラーアイコンの使用によって――識別される。</p></li></ul><div class="note"><p class="prefix"><em>注記: </em>注: 上記2つの状況の1つは、データフォーマット、データ範囲、又は<code>required</code>プロパティを伝えるラベル及び/又は命令とプログラムによって関連付けられているフィールドにも起こりうる。</p></div><p>失敗したフィールドと具体的なエラーの説明をプログラム的に関連付けることが常に望ましい一方で、ページのデザイン又は利用されているフレームワークは、コンテンツ制作者がプログラム的に関連付けるための能力を制約するかもしれない。このような場合、コンテンツ制作者は、検証に失敗したフィールド上でプログラムによって <code>aria-invalid</code> を "true" に設定してもよい。これは主に、目の不自由な利用者によって使用される（スクリーンリーダー/画面拡大のような）支援技術で解釈可能である。フィールドが "true" に設定された<code>aria-invalid</code>を持つ場合、フィールドがフォーカスを取得する際に、SafariのVoiceOverは "invalid data" とアナウンスし、JAWSとNVDAは "invalid entry" としてエラーを通知する。</p><p>このARIA属性は、プログラムによって設定/オンにされる必要がある。入力の検証が行われる又はフォームが送信される前に、その属性を"true"に設定するべきではない。<code>aria-invalid</code>を "false" に設定することは、フォームコントロールにこの属性を全く指定しないことと同じである。当然ながら、この場合、支援技術は利用者に何も伝えない。</p><p>可視テキストが、失敗したフィールドをプログラムによって識別する及び/又はエラーを補正できる方法を伝えるために使用される場合、<code>aria-invalid</code>を"true"に設定することは、厳格な整合性の観点からは必要とされないが、それでも利用者のために役立つ情報を提供する可能性がある。</p></div><h2 class="small-head" id="ARIA21-examples">事例</h2><h3 class="small-head" id="ARIA21-ex1">事例 1: 必須フィールドにaria-invalidを使用する</h3><div class="example"><div class="textbody"><p>何も入力されていない必須フィールドに<code>aria-invalid</code>属性が指定されている。フォーム上部のメッセージは、フォームの送信がこのせいで失敗したことを伝えている。</p><p>jQueryコード及びHTMLフォームマークアップの一部は次のとおりである:</p><div class="code"><pre><code>
&lt;script&gt;
...
...
		if ($('#first').val() === '') {
			$('#first').attr("aria-invalid", "true");
$("label[for='first']").addClass('failed');
		}
		if ($('#last').val() === '') {
			$('#last').attr("aria-invalid", "true");
$("label[for='last']").addClass('failed');
		} 
		if ($('#email').val() === '') {
			$('#email').attr("aria-invalid", "true");
$("label[for='email']").addClass('failed');
		} 
...
...
&lt;/script&gt;
&lt;style type="text/css"&gt;
label.failed {
	border: red thin solid;
}
&lt;/style&gt;
&lt;form name="signup" id="signup" method="post" action="#"&gt;
 &lt;p&gt;
    &lt;label for="first"&gt;First Name (required)&lt;/label&gt;&lt;br&gt;
    &lt;input type="text" name="first" id="first"&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;label for="last"&gt;Last Name (required)&lt;/label&gt;&lt;br&gt;
    &lt;input type="text" name="last" id="last"&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;label for="email"&gt;Email (required)&lt;/label&gt;&lt;br&gt;
    &lt;input type="text" name="email" id="email"&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;input type="submit" name="button" id="button" value="Submit"&gt;
  &lt;/p&gt;
&lt;/form&gt;
            </code></pre></div><p><a href="https://www.w3.org/WAI/WCAG20/Techniques/working-examples/ARIA21/Form-AriaLiveWithJQ.html">動作する例</a>。</p></div></div><h3 class="small-head" id="ARIA21-ex2">事例 2: データフォーマットのエラーを識別する</h3><div class="example"><div class="textbody"><p><code>Aria-invalid</code>及び<code>aria-describedby</code>が、個人識別番号（PIN）、電子メールアドレス、又は開始日が期待される形式でない場合に、エラーを示すために一緒に使用されている。エラーメッセージは、<code>aria-describedby</code>を使うことでフィールドに関連付けられており、<code>aria-invalid</code>によって、エラーになっているフィールドをプログラムによって簡単に見つけられるようになっている。</p><p>以下は、事例1において電子メールアドレスフィールドにレンダリングされるHTMLコードである。（sam@example.comの代わりに）"samexample.com"のような不正な電子メールアドレスが利用者によって入力された場合、HTMLコードは次のようになる:</p><div class="code"><pre><code>
&lt;div class="control"&gt;
&lt;p&gt;&lt;label for="email"&gt;Email address: [*]&lt;/label&gt; 
&lt;input type="text" name="email" id="email" class="error" aria-invalid="true" aria-describedBy="err_1" /&gt;&lt;/p&gt; 
&lt;span class="errtext" id="err_1"&gt;Error: Incorrect data&lt;/span&gt;&lt;/div&gt;
            </code></pre></div><p>そしてデータが電子メールフィールドに入力されなかった場合、HTML コードは次のようになる:</p><div class="code"><pre><code>
&lt;div class="control"&gt;
&lt;p&gt;&lt;label for="email"&gt;Email address: [*]&lt;/label&gt; 
&lt;input type="text" name="email" id="email" class="error" aria-invalid="true" aria-describedBy="err_2" /&gt;&lt;/p&gt;
&lt;span class="errtext" id="err_2"&gt;
 Error: Input data missing&lt;/span&gt;
&lt;/div&gt;            </code></pre></div><p>jQueryコード: jQueryは、class属性だけでなくaria-invalid又はaria-describedby属性をも追加し、かつエラーテキストを追加するために使用される。これは、aria-invalid及びclass="error"を挿入するコードであるが、プログラム的にコントロールとエラーテキスト"incorrect data"を関連付けないコードである。:</p><div class="code"><pre><code>
$(errFld).attr("aria-invalid", "true").attr("class", "error");
// Suffix error text: 
$(errFld).parent().append('&lt;span class="errtext"&gt;Error: Incorrect data&lt;/span&gt;');
            </code></pre></div><p>CSS コード:</p><div class="code"><pre><code>
input.error {
   border: red thin solid;}
span.errtext {
	margin-bottom: 1em; 	padding: .25em 1.4em .25em .25em;
	border: red thin solid; 	background-color: #EEEEFF;
	background-image:url('images/iconError.gif');
	background-repeat:no-repeat; 	background-position:right;	
}
            </code></pre></div><p><a href="https://www.w3.org/WAI/WCAG20/Techniques/working-examples/ARIA21/form-alert3.html">動作する例</a>.</p></div></div><h2 id="ARIA21-resources">参考リソース</h2><div class="textbody"><p>この参考リソースは、あくまでも情報提供のみが目的であり、推薦などを意味するものではない。</p><ul><li><p>
                  <a href="http://www.w3.org/TR/wai-aria-1.1/#states_and_properties">Supported States and Properties: WAI-ARIA 1.1</a>
               </p></li><li><p>
               	<a href="http://www.deque.com/blog/aria-invalid-error-indication/">Using Aria-invalid for Error Indication</a>
               </p></li></ul></div><h2 id="ARIA21-related-techs">関連する達成方法</h2><div class="textbody"><ul><li><a href="G83.html">G83: 入力が完了していない必須項目を特定するために、テキストの説明文を提供する</a></li><li><a href="G85.html">G85: 利用者の入力が要求されたフォーマット又は値ではなかった際に、テキストの説明文を提供する</a></li><li><a href="G139.html">G139: 利用者がエラー箇所に移動できるメカニズムを作成する</a></li><li><a href="SCR32.html">SCR32: クライアントサイドのバリデーションを提供し、DOM を介してエラーテキストを追加する</a></li><li><a href="ARIA18.html">ARIA18: エラーを特定するために aria-alertdialog を使用する</a></li><li><a href="ARIA19.html">ARIA19: エラーを特定するために、ARIA role=alert 又はライブ領域（Live Regions）を使用する</a></li></ul></div><h2 id="ARIA21-tests">検証</h2><div class="textbody"><h3 class="small-head" id="ARIA21-procedure">チェックポイント</h3><p>検証の失敗の伝達を<code>aria-invalid</code>に依存する各フォームコントロールに対して:</p><ol class="enumar"><li><p>検証の失敗が存在しない場合に<code>aria-invalid</code>がtrueに設定されない。</p></li><li><p>検証の失敗が存在する場合に<code>aria-invalid</code>がtrueに設定される。</p></li><li><p>プログラム的に関連付けられたラベル/プログラム的にフィールドに関連づけられた説明文がエラーを理解するのに十分な情報を提供している。</p></li></ol><h3 class="small-head" id="ARIA21-results">判定基準</h3><ul><li><p>1.から3.を満たしている。</p></li></ul><p>この達成方法が「十分な達成方法」の一つである場合、このチェックポイントや判定基準を満たしていなければ、それはこの達成方法が正しく用いられていないことを意味するが、必ずしも達成基準を満たしていないことにはならない。場合によっては、別の達成方法によってその達成基準が満たされていることもありうる。</p></div><!-- BOTTOM NAVIGATION BAR --><ul id="navigationbottom"><li><strong><a href="#top">このページの先頭へ</a></strong></li><li><strong><a href="Overview.html#contents" title="Table of Contents">目次</a></strong></li><li><strong><a href="intro.html" title="Introduction to Techniques for WCAG 2.0"><abbr title="Introduction">イントロダクション</abbr></a></strong></li><li><a title="ARIA20: ページの領域を特定するために region ロールを使用する" href="ARIA20.html"><strong>前: </strong>
        達成方法 ARIA20</a></li><li><a title="Flash テクノロジーノートflash_notes: " href="flash_notes.html"><strong>次: </strong>Flash テクノロジーノート
        達成方法 flash_notes</a></li></ul><div class="footer"><p class="copyright">このウェブページは、<a href="Overview.html">WCAG 2.0 達成方法集: WCAG 2.0 の達成方法と不適合事例</a>（<a href="https://www.w3.org/TR/WCAG20-TECHS/ARIA21.html">この文書の最新版（英語）</a>を参照してください）の一部です。文書全体を<a href="complete.html">単一HTMLファイルにしたもの</a>もご利用いただけます。この文書と、ウェブ・コンテンツ・アクセシビリティ・ガイドライン (WCAG) 2.0に関連する他の文書との関係については、<a href="http://www.w3.org/WAI/intro/wcag20">The WCAG 2.0 Documents (英語)</a>をご覧ください。パブリックコメントを送るには、<a href="http://www.w3.org/WAI/WCAG20/comments/">Instructions for Commenting on WCAG 2.0 Documents（英語）</a>に従ってください。</p><p class="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2016 <a href="http://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href="http://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). W3C <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply.</p><p>【重要】 この文書は、W3Cワーキンググループノート「<a href="https://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20161007/">Techniques for WCAG 2.0</a>」（原文は英語: 2016年10月7日公開）を情報通信アクセス協議会の「<a href="http://waic.jp/committee/wg4/">ウェブアクセシビリティ基盤委員会（WAIC） 翻訳ワーキンググループ（WG4）</a>」が翻訳と修正をおこなって公開しているものです。この文書の正式版は、あくまで W3Cのサイト内にある英語版であり、この文書には翻訳上の間違い、あるいは不適切な表現が含まれている可能性がありますのでご注意ください。最新で正確な情報は、W3Cが公開している原文（英語）にてご確認ください。</p><p>【注意】 達成方法のタイトルが英語のままになっているものは、日本語訳を行っていないため、原文（英語）にリンクしています。</p></div></body></html>