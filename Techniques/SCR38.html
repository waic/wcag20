
<!DOCTYPE html
  >
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja"><head><meta charset="UTF-8"/><title>SCR38: プログレッシブエンハンスメントで設計されたウェブページに対して、適合している代替版を作成する | WCAG 2.0 達成方法集
              </title><link rel="stylesheet" type="text/css" href="https://www.w3.org/StyleSheets/TR/2016/W3C-WG-NOTE.css"/><link rel="stylesheet" type="text/css" href="additional.css"/><link rel="stylesheet" type="text/css" href="slicenav.css"/></head><body class="slices toc-inline">
<div><p>【注意】この文書にはより新しいバージョンが存在します: <a href="/translations/WCAG21/Techniques/">WCAG 2.1 達成方法集</a></p>
</div>

<div id="masthead"><p class="logo"><a href="https://www.w3.org/"><img width="72" height="48" alt="W3C" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C"/></a></p><p class="collectiontitle"><a href="Overview.html">WCAG 2.0 達成方法集</a></p></div><div id="skipnav"><p class="skipnav"><a href="#maincontent">Skip to Content (Press Enter)</a></p></div><a name="top"> </a><!-- TOP NAVIGATION BAR --><ul id="navigation"><li><strong><a href="Overview.html#contents" title="Table of Contents">目次</a></strong></li><li><strong><a href="intro.html" title="Introduction to Techniques for WCAG 2.0"><abbr title="Introduction">イントロダクション</abbr></a></strong></li><li><a title="SCR37: デバイス非依存な方法でカスタムダイアログを作成する" href="SCR37.html"><strong>前: </strong>
        達成方法 SCR37</a></li><li><a title="SVR1: クライアントサイドではなく、サーバーサイドで自動リダイレクトを実装する" href="SVR1.html"><strong>次: </strong>
        達成方法 SVR1</a></li></ul><div class="navtoc"><p>このページのコンテンツ:</p><ul id="navbar"><li><a href="#SCR38-disclaimer">達成方法に関する重要な情報</a></li><li><a href="#SCR38-applicability">適用 (対象)</a></li><li><a href="#SCR38-description">解説</a></li><li><a href="#SCR38-examples">事例</a></li><li><a href="#SCR38-resources">参考リソース</a></li><li><a href="#SCR38-related-techs">関連する達成方法</a></li><li><a href="#SCR38-tests">検証</a></li></ul></div><div class="skiptarget"><a id="maincontent">-</a></div> <h1><a name="SCR38" id="SCR38"> </a>SCR38: プログレッシブエンハンスメントで設計されたウェブページに対して、適合している代替版を作成する</h1><div id="SCR38-disclaimer"><h2>達成方法に関する重要な情報</h2><p>この達成方法 (参考) の使用法と、この達成方法が WCAG 2.0 達成基準 (規定) とどのように関係するのかに関する重要な情報については、<a href="https://waic.jp/docs/UNDERSTANDING-WCAG20/understanding-techniques.html">WCAG 達成基準の達成方法を理解する</a>を参照のこと。適用 (対象) のセクションは、その達成方法の範囲について説明しており、特定の技術に関する達成方法の存在は、その技術があらゆる状況で WCAG 2.0 を満たすコンテンツを作成するために使用できることを意味するものではない。</p></div><div class="applicability"><h2 id="SCR38-applicability">適用 (対象)</h2><div class="textbody"><p>HTML with scripting.</p></div></div><p class="referenced">これは、次の達成基準に関連する達成方法である:</p><ul><li><a href="https://waic.jp/docs/WCAG20/Overview.html#cc1">
					適合要件 1 (適合レベル)
				</a></li></ul><h2 id="SCR38-description">解説</h2><div class="textbody"><p>この達成方法の目的は、プログレッシブエンハンスメントで設計されたウェブページに適合する代替バージョンを提供することである。この達成方法は、スクリプトを用いて達成する方法を次のように示している:</p><ol class="enumar"><li><p>ウェブページの初期拡張バージョンを格納することで、後に拡張されたコンテンツのバージョンに対して「適合した代替バージョン」として機能できるようにし、かつ</p></li><li><p>すべての拡張されたバージョンのウェブページに対して、利用者がコンテンツを格納された初期拡張の代替バージョンに戻すことができる機能を実装する。</p></li></ol><p>プログレッシブエンハンスメントで設計されたウェブページはサポートされたウェブ技術を HTML 基盤のレイヤーに適用できるようにするため、ウェブ対応機器 (サイズ、機能及びソフトウェア) の特徴を検出する。より高度なアクセス機器のさまざまな機能に合わせて拡張バージョンのページが作成される一方で、そのようなウェブページの基本的なコンテンツと機能は、よりシンプルなウェブ対応機器を使用している人なら誰でも HTML 基盤を通じて利用することができる。</p><p>現在の代替バージョンのウェブページの要件は次のようになっている: 「注記 4: 様々な技術環境又は利用者層に対応するために、複数の代替バージョンを提供してもよい。この場合、各バージョンは可能なかぎり適合したものでなければならず、適合要件 1 を満たすためには、そのうちの一つのバージョンが完全に適合したものでなければならない。」プログレッシブエンハンスメントで設計されたウェブページは、どのバージョンを完全に適合したものとして選ぶかという問題を残しているが、どんな利用者においても不利な状況におかれないようにする。</p><p>この課題の解決策の一つは、広範囲のウェブ対応機器がコンテンツにアクセス可能なため、拡張前のウェブページ (例: スクリプト、スタイル、HTML ではないプラグインが無効時に作成される HTML のソースコードの DOM の状態) を「完全に適合したバージョン」として選択することである。</p><div class="note"><p class="prefix"><em>注記: </em>この達成方法はすべてのスクリプト、スタイル、プラグインを除外するが、これは WCAG 2.0 に適合するために必須ではないことを示す必要がある。制作者は類似した技術を使用することができるが、還元されたスタイルとスクリプトを「拡張前」のバージョンで保つことができる。</p></div><p>この技術は一つのバージョンで適合表明を行う方法を提供するが、制作者は各拡張版のウェブページが可能な限り適合するために作業し続けるべきである。</p></div><h2 class="small-head" id="SCR38-examples">事例</h2><h3 class="small-head" id="SCR38-ex1">事例 1: JavaScript を使用する</h3><div class="example"><div class="textbody"><p>この事例は「accToggle.js」ファイル内で JavaScript を使用し、HTML ソースコードのみで作成された拡張前のウェブページを格納することで、後に拡張されたウェブページの「適合した代替バージョン」として機能させることができる。そして、利用者がウェブページを最初の拡張前の「適合した代替バージョン」に戻せるよう、すべての拡張されたウェブページに切り替えリンクを設置する。注記: 「sayhello.js」ファイルは単なる外部のペイロードファイルの例であり、必要な他の外部スクリプトに置き換えられる。</p><p>accToggle.js ファイル内のスクリプトは拡張前のバージョンを格納し、このバージョンの URL に #accessible という接尾辞を付与する。「WCAG 2.0 適合する代替版」という (すべての拡張されたバージョンのページにおいて、<code>body</code> 要素の最初の子要素として設置される) リンクをクリックすることにより、接尾辞に「#accessible」とついた URL に変化し、<code>body</code> 要素と <code>head</code> 要素内の HTML を拡張前のコードに初期化する。拡張前の状態はリンクから、又は URL をブラウザに直接入力することでアクセスできる。さらに、拡張前の「適合する代替版」にリンクが追加され、利用者がウェブページを拡張版にすることができる (これはブラウザの戻るボタンからでも可能)。</p><p>acctoggle.js ソースコード:</p><div class="code"><pre><code>
window.onload = function(event) {

    // 拡張前のコンテンツを保管する
    var initialHead = document.head.innerHTML;
    var initialBody = document.body.innerHTML;
    var initialURL = location.href;
    
    var runOnce = function() {
         // ページ読み込み毎に実行したいペイロード　例: Google Analytics コード
    }
    
    var setup = function() {
         // 適合している代替版のリンクを作成する

        var toggleEnhanced = document.querySelector("#toggle_enhanced");
        if (toggleEnhanced) {
            toggleEnhanced.outerHTML = "";
        }
        
        var nel = document.createElement("a");
        nel.id = "acctoggle";
        nel.setAttribute("href", "#accessible");
        nel.innerHTML = "WCAG 2.0 conforming alternate version";
        document.body.insertBefore(nel, document.body.firstChild);
        
         // ペイロード
        var s = document.createElement("SCRIPT");
        s.setAttribute("src", "sayhello.js");
        document.querySelector("HEAD").appendChild(s);   
       }
    
    setup();
    runOnce();
    
    window.onpopstate = function(event) {
        if (location.href.indexOf("#accessible") != -1) {
             // コンテンツを拡張前のバージョンに戻す
            document.head.innerHTML = initialHead;
            document.body.innerHTML = initialBody;
            
            // create enhanced version link
            var el = document.createElement("a");
            el.id = "toggle_enhanced";
            el.setAttribute("href", "");
            el.innerHTML = "Enhanced version";
            var back = function(e) {
                 e.preventDefault();
                 window.history.back();
            }
            el.addEventListener("click", back, false);
            document.body.insertBefore(el, document.body.firstChild);
        }
        if (location.href == initialURL) {
            setup();
        }
    };
}
		 </code></pre></div><p>HTML ウェブページソースコード:</p><div class="code"><pre><code>&lt;!DOCTYPE html&gt;
  &lt;html lang="en"&gt;
    &lt;head&gt;
        &lt;title&gt;Evaluera Ltd&lt;/title&gt;
        &lt;meta charset="UTF-8" /&gt;
        &lt;script src="accSwitch.js"&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt; 
        &lt;h1&gt;Test Page&lt;/h1&gt;
        &lt;p&gt;Say: &lt;span id="change"&gt;Goodbye&lt;/span&gt;&lt;/p&gt;
    &lt;/body&gt;
&lt;/html&gt;			
		 </code></pre></div><p>sayhello.js ソースコード</p><div class="code"><pre><code>
var change = document.querySelector("#change");
change.innerText = "Hello";		
		 </code></pre></div></div></div><h3 class="small-head" id="SCR38-ex2">事例 2: EnhanceJS を使用する―プログレッシブエンハンスメントのアプリケーションを改善するために設計された Javascript フレームワーク</h3><div class="example"><div class="textbody"><p><a href="https://code.google.com/p/enhancejs/">EnhanceJS</a> は「高度なスタイルとスクリプトをページに適用する前に、JavaScript の主要な機能と CSS のサポートを最初にテストすることで、プログレッシブエンハンスメントのアプリケーションを改善するように設計された」オープンソースの JavaScript フレームワークである。さらに、デフォルトの EnhanceJS スクリプトは、利用者が拡張前のウェブページの状態に戻すことがでるよう、すべての拡張版のページに自動的に切り替えリンクを作成する。(EnhanceJS でデフォルトで設定されるこれを「低帯域幅版」と呼ぶ)。EnhanceJS ではこの設定は拡張前の状態が「低帯域幅版」ではなく、「WCAG 2.0 の適合している代替版」として認識されるよう変更されている。</p><p>HTML コンポーネント:</p><div class="code"><pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
    &lt;head&gt;
    &lt;script type="text/javascript" src="enhance.js"&gt;&lt;/script&gt;
    &lt;script type="text/javascript"&gt;
        // Run capabilities test
        enhance({
            loadStyles: [
                "example.css"
            ], 
            loadScripts: [
                "example.js"
            ],
            // text shown in enhanced mode
            forceFailText: "WCAG 2.0 conforming alternate version",
            // text shown in accessible mode
            forcePassText: "Enhanced version"
        });
    &lt;/script&gt;
    &lt;/head&gt;
    ....

</code></pre></div></div></div><h2 id="SCR38-resources">参考リソース</h2><div class="textbody"><p>この参考リソースは、あくまでも情報提供のみが目的であり、推薦などを意味するものではない。</p><ul><li><p>
                  <a href="https://waic.jp/docs/WCAG-TECHS/C29.html#C29-sa1">クッキーを使用する</a></p></li><li><p><a href="https://waic.jp/docs/WCAG-TECHS/C29.html#C29-sa2">プログレッシブエンハンスメントとアンオブトルーシブ JavaScript</a></p></li></ul></div><h2 id="SCR38-related-techs">関連する達成方法</h2><div class="textbody"><ul><li><a href="G136.html">G136: 不適合なウェブページの先頭に、適合している代替版を指すリンクを提供する</a></li><li><a href="C29.html">C29: 適合している代替版を提供するために、スタイルスイッチャーを使用する</a></li><li><a href="SVR4.html">SVR4: 適合している代替版の表示に関する設定を利用者が行えるようにする</a></li></ul></div><h2 id="SCR38-tests">検証</h2><div class="textbody"><h3 class="small-head" id="SCR38-procedure">手順</h3><ol class="enumar"><li><p>拡張されたウェブページが「適合している代替版」へのリンクを含んでいる。</p></li><li><p>代替版が、オリジナルページの<a href="https://waic.jp/docs/WCAG20/Overview.html#conforming-alternate-versiondef">適合している代替版</a>であり、かつ要求された適合レベルで WCAG 2.0 に適合していることを確認する。</p></li></ol><h3 class="small-head" id="SCR38-results">期待される結果</h3><ul><li><p>1. 及び 2. の結果が真である。</p></li></ul><p>この達成方法が「十分な達成方法」の一つである場合、この手順や期待される結果を満たしていなければ、それはこの達成方法が正しく用いられていないことを意味するが、必ずしも達成基準を満たしていないことにはならない。場合によっては、別の達成方法によってその達成基準が満たされていることもありうる。</p></div><!-- BOTTOM NAVIGATION BAR --><ul id="navigationbottom"><li><strong><a href="#top">このページの先頭へ</a></strong></li><li><strong><a href="Overview.html#contents" title="Table of Contents">目次</a></strong></li><li><strong><a href="intro.html" title="Introduction to Techniques for WCAG 2.0"><abbr title="Introduction">イントロダクション</abbr></a></strong></li><li><a title="SCR37: デバイス非依存な方法でカスタムダイアログを作成する" href="SCR37.html"><strong>前: </strong>
        達成方法 SCR37</a></li><li><a title="SVR1: クライアントサイドではなく、サーバーサイドで自動リダイレクトを実装する" href="SVR1.html"><strong>次: </strong>
        達成方法 SVR1</a></li></ul><div class="footer"><p class="copyright">このウェブページは、<a href="Overview.html">WCAG 2.0 達成方法集: WCAG 2.0 の達成方法と失敗例</a> (<a href="https://www.w3.org/TR/WCAG20-TECHS/SCR38.html">この文書の最新版 (英語)</a> を参照してください) の一部です。文書全体を<a href="complete.html">単一 HTML ファイルにしたもの</a>もご利用いただけます。この文書と、Web Content Accessibility Guidelines (WCAG) 2.0 に関連する他の文書との関係については、<a href="http://www.w3.org/WAI/intro/wcag20">The WCAG 2.0 Documents</a> をご覧ください。パブリックコメントを送るには、<a href="http://www.w3.org/WAI/WCAG20/comments/">Instructions for Commenting on WCAG 2.0 Documents</a> に従ってください。</p><p class="copyright"><a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2016 <a href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href="http://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). W3C <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="https://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply.</p><p>【注意】 この文書は、W3C ワーキンググループノート <a href="https://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20161007/">Techniques for WCAG 2.0 の 2016 年 10 月 7 日時点での最新版</a>を<a href="https://waic.jp/committee/wg4/">ウェブアクセシビリティ基盤委員会 (WAIC)</a> が翻訳して公開しているものです。この文書の正式版は、W3C のサイトにある英語版です。正確な内容については、W3C が公開している原文 (英語) をご確認ください。この翻訳文書はあくまで参考情報であり、翻訳上の誤りが含まれていることがあります。翻訳上の誤りを見つけられた場合は、<a href="https://waic.jp/contact/" id="file-issue">翻訳に関するお問い合わせ</a>からご連絡ください。</p><p>【重要】 達成方法のタイトルが英語のままになっているものは、日本語訳を行っていないため、原文 (英語) にリンクしています。</p></div><script src="https://waic.jp/docs/js/translation-contact.js"> </script></body></html>