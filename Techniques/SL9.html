
<!DOCTYPE html
  >
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja"><head><meta charset="UTF-8"/><title>SL9: Handling Key Events to Enable Keyboard Functionality in Silverlight | WCAG 2.0 達成方法集
              </title><link rel="stylesheet" type="text/css" href="https://www.w3.org/StyleSheets/TR/2016/W3C-WG-NOTE.css"/><link rel="stylesheet" type="text/css" href="additional.css"/><link rel="stylesheet" type="text/css" href="slicenav.css"/></head><body class="slices toc-inline"><div id="masthead"><p class="logo"><a href="https://www.w3.org/"><img width="72" height="48" alt="W3C" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C"/></a></p><p class="collectiontitle"><a href="Overview.html">WCAG 2.0 達成方法集</a></p></div><div id="skipnav"><p class="skipnav"><a href="#maincontent">Skip to Content (Press Enter)</a></p></div><a name="top"> </a><!-- TOP NAVIGATION BAR --><ul id="navigation"><li><strong><a href="Overview.html#contents" title="Table of Contents">目次</a></strong></li><li><strong><a href="intro.html" title="Introduction to Techniques for WCAG 2.0"><abbr title="Introduction">イントロダクション</abbr></a></strong></li><li><a title="SL8: Displaying HelpText in Silverlight User Interfaces" href="SL8.html"><strong>前: </strong>
        達成方法 SL8</a></li><li><a title="SL10: Implementing a Submit-Form Pattern in Silverlight" href="SL10.html"><strong>次: </strong>
        達成方法 SL10</a></li></ul><div class="navtoc"><p>このページのコンテンツ:</p><ul id="navbar"><li><a href="#SL9-disclaimer">達成方法に関する重要な情報</a></li><li><a href="#SL9-applicability">適用 (対象)</a></li><li><a href="#SL9-description">解説</a></li><li><a href="#SL9-examples">事例</a></li><li><a href="#SL9-resources">参考リソース</a></li><li><a href="#SL9-related-techs">関連する達成方法</a></li><li><a href="#SL9-tests">検証</a></li></ul></div><div class="skiptarget"><a id="maincontent">-</a></div> <h1><a name="SL9" id="SL9"> </a>SL9: Handling Key Events to Enable Keyboard Functionality in Silverlight</h1><div id="SL9-disclaimer"><h2>達成方法に関する重要な情報</h2><p>これらの達成方法 (参考) の使用法及び、それらが WCAG 2.0 達成基準 (規定) とどのように関係するかに関する重要な情報については、<a href="https://waic.jp/docs/UNDERSTANDING-WCAG20/understanding-techniques.html">WCAG 達成基準の達成方法を理解する</a>を参照のこと。適用 (対象) セクションは、その達成方法の範囲について説明しており、特定の技術に関する達成方法があるからといって、WCAG 2.0 を満たすコンテンツを作成する際に、常にその技術が使用可能であるわけではない。</p></div><div class="applicability"><h2 id="SL9-applicability">適用 (対象)</h2><div class="textbody"><ul><li><p> Microsoft Silverlight, versions 3 and greater </p></li><li><p> Silverlight managed programming model and Silverlight XAML </p></li></ul></div></div><div class="note"><p><em>訳注:</em> Silverlight は、2021 年 11 月にサポートを終了する計画が Microsoft 社より公表されている (<a href="https://support.microsoft.com/ja-jp/lifecycle/search/12905">Microsoft サポート - Silverlight のライフサイクルポリシー</a>)。</p><p>WAIC では、Silverlight に関する達成方法の翻訳を行っていないが、将来もその予定がないことに留意されたい。</p></div><p class="referenced">これは、次の達成基準に関連する達成方法である:</p><ul><li><a href="https://waic.jp/docs/WCAG20/Overview.html#keyboard-operation-keyboard-operable">
				達成基準 2.1.1 (キーボード)</a><ul><li><a href="https://waic.jp/docs/WCAG20/quickref/#keyboard-operation-keyboard-operable">
						クイックリファレンス 2.1.1 (キーボード)
					</a></li><li><a href="https://waic.jp/docs/UNDERSTANDING-WCAG20/keyboard-operation-keyboard-operable.html">
						達成基準 2.1.1 (キーボード)を理解する
					</a></li></ul></li><li><a href="https://waic.jp/docs/WCAG20/Overview.html#keyboard-operation-all-funcs">
				達成基準 2.1.3 (キーボード (例外なし) )</a><ul><li><a href="https://waic.jp/docs/WCAG20/quickref/#keyboard-operation-all-funcs">
						クイックリファレンス 2.1.3 (キーボード (例外なし) )
					</a></li><li><a href="https://waic.jp/docs/UNDERSTANDING-WCAG20/keyboard-operation-all-funcs.html">
						達成基準 2.1.3 (キーボード (例外なし) )を理解する
					</a></li></ul></li></ul><div class="ua-issues"><h2 class="small-head" id="ua10.9.1">ユーザエージェント及び支援技術によるサポート</h2><p><a href="./ua-notes/silverlight.html#SL9">SL9 に関するユーザエージェントサポートノート</a>を参照のこと。<a href="silverlight_notes.html">Silverlight Technology Notes</a>も参照。</p></div><h2 id="SL9-description">解説</h2><div class="textbody"><p>The objective of this technique is to handle key events in a Silverlight
    				application and enable application-specific keyboard functionality
    				in a Silverlight application. The keyboard functionality might relate
    				to a particular element of the Silverlight application user interface,
    				or might be a handler for global key events within the application,
    				such as an application-wide access key. </p><p>In Silverlight, application authors handle user input by attaching
    				event handlers for input events. The input events are implemented on
    				a class that is a base element in the Silverlight class hierarchy,
    				such that all Silverlight UI elements can be the source of an input
    				event if the user interacts with them. Typically, the event handler
    				names are specified in XAML, although it is also possible to wire events
    				in code. The implementation of the handlers for the Silverlight managed
    				code programming model is always done in C# or Visual Basic code. </p><p>The most commonly used input events are the following: </p><ul><li><p> 
               <code>KeyUp</code>, <code>KeyDown</code> - these are the
    				key events. Which key is pressed is determined by event parameters
    				passed to the handler. </p></li><li><p> 
               <code>MouseEnter</code>, <code>MouseOver</code>, <code>MouseLeave</code> 
            </p></li><li><p> 
               <code>MouseLeftButtonDown</code>, <code>MouseLeftButtonUp</code>, <code>MouseRightButtonDown</code>, <code>MouseRightButtonUp</code> 
            </p></li></ul><p>Other forms of input that Silverlight supports include touch devices
    				(with mouse promotion for cases where the application runs on devices
    				that do not have touch input modes) and a related inking mode. For
    				any UI interaction that uses mouse input or these other input modes,
    				Silverlight application authors can write a parallel key event handler
    				to provide users the keyboard equivalent. </p><p>Also, the Silverlight event system and control model combine to enable
    				behavior whereby a mouse event and a keyboard event can be treated
    				as the same event and can be handled by a common event handler. Using
    				this technique, Silverlight authors can facilitate keyboard functionality
    				in custom controls or as override behavior to existing Silverlight-supplied
    				controls, and provide equivalence for mouse events or events that are
    				specific to other input devices. Silverlight authors can also use controls
    				that already have a keyboard equivalence as a built-in behavior. </p><p>The parallel key event handler case, and the built-in behavior case,
    				are each shown in one of the examples. </p><p>All input events report a specific source that is communicated to
    				handler code as an event parameter, so that the application author
    				can identify which element in their Silverlight UI was being interacted
    				with, and the application can perform an action that is relevant to
    				that user input. In the case of mouse events, the event source is the
    				element that the mouse pointer is over at the time. In the case of
    				key events, the event source is the element that has focus. The element
    				that has focus is visually indicated so that the user knows which element
    				they are interacting with (see <a href="SL2.html"><em>SL2: Changing The Visual Focus Indicator in Silverlight</em></a>). Assistive technologies
    				often have parallel conventions whereby the user is made aware of which
    				element is visually focused and is the current input scope presented
    				by the assistive technology, </p><div id="SL9_core_events"><h4>Silverlight core control built-in keyboard functionality</h4><p>The following is a list of the Silverlight-supplied controls that
    					have some level of key equivalence as a built-in behavior. In these
    					cases, it is not necessary to add a specific Key event handler; you
    					can handle the event and/or rely on the built-in key handling as listed. </p><ul><li><p> 
                  <code>Button</code> (SPACE and ENTER) - raises <code>Click</code> event. </p></li><li><p> Other <code>ButtonBase</code> classes eg <code>RepeatButton</code>, <code>HyperlinkButton</code> (SPACE
    					and ENTER) - raises <code>Click</code> event. </p></li><li><p> 
                  <code>TextBox</code> (ENTER, unless in a mode where the <code>TextBox</code> 
    						accepts multiple lines) - moves focus to next control, treated like
    						a TAB </p></li><li><p> 
                  <code>ListBox</code> (various keys) - see <a href="https://msdn.microsoft.com/en-us/library/system.windows.controls.listbox.onkeydown%28VS.95%29.aspx">OnKeyDown
    							Method</a>. </p></li><li><p> 
                  <code>ComboBox</code> (arrow keys ) - traverse list choices
    								as control UI if popup area displayed. </p></li><li><p> 
                  <code>RichTextBox</code> (various keys ) - enable edit mode
    									operations; see <a href="https://msdn.microsoft.com/en-us/library/ee681613%28VS.95%29.aspx">RichTextBox
    										Overview</a>. </p></li><li><p> 
                  <code>Slider</code> (arrow keys ) - increment/decrement values. </p></li></ul></div><div id="SL9_host_events"><h4>Browser hosts and keyboard events</h4><p>Silverlight is hosted as a plug-in inside a browser host. The Silverlight
    					run-time only receives the input events that the browser host forwards
    					to hosted plug-ins through a browser-specific program access layer.
    					Occasionally the browser host receives input that the browser host
    					itself handles in some way, and does not forward the keyboard event.
    					An example is that a Silverlight application hosted by an Internet
    					Explorer browser host on Windows operating system cannot detect a press
    					of the ALT key, because Internet Explorer processes this input and
    					performs the action of bringing keyboard focus to the Internet Explorer
    					menu bar. Silverlight authors might need to be aware of browser-specific
    					input handling models and not rely on key events for keys that are
    					essentially reserved for use by a browser host. For more information,
    					see <a href="https://msdn.microsoft.com/en-us/library/cc189015(VS.95).aspx">Keyboard
    						Support</a>. </p></div><div id="SL9_other_events"><h4>Other event models</h4><p>This technique specifically discusses event handling for the Silverlight
    					managed programming model. However, Silverlight also supports parallel
    					models for event handling, either through a Silverlight run-time feature
    					or due to Silverlight's role as a plug-in within a script-capable browser
    					host. For example, events from the HTML DOM can be handled by JavaScript
    					at HTML scope for the overall Silverlight plug-in; this uses the browser
    					host as script processor and the Silverlight run-time is not directly
    					involved. Or, HTML DOM events can be handled through an HTML bridge
    					that calls into Silverlight application code. These event models can
    					potentially be used to provide keyboard equivalence, but it is generally
    					more convenient to use the managed code model as described in this
    					technique. For more information on other event models in Silverlight,
    					see <a href="https://msdn.microsoft.com/en-us/library/cc189018(VS.95).aspx">Events
    						Overview for Silverlight</a>. </p></div></div><h2 class="small-head" id="SL9-examples">事例</h2><p>Two examples are given. The first example is for the scenario of a
    				Silverlight application author that is simply incorporating an existing
    				control into their application design, and is taking advantage of mouse-keyboard
    				equivalence that is already defined by certain Silverlight core controls.
    				The second example is from the perspective of a control author, or
    				at least that of a Silverlight application author that intends to encapsulate
    				behavior in a custom Silverlight control and use it in their own application.
    				For this second example, the control will handle the general Silverlight
    				input event <code>KeyUp</code>, in order to check for input from
    				key(s) that are designated to have a specific input meaning for that
    				control. </p><h3 class="small-head" id="SL9-ex1">事例 1: Built-in keyboard equivalence for core Silverlight controls</h3><div class="example"><div class="textbody"><p>This example pertains to cases where the control that handles key
    						events is focusable (through the tab sequence, etc.) and where an existing
    						Silverlight control behavior provides the keyboard equivalence In this
    						example, a Silverlight UI includes a <code>Button</code> element.
    						For sighted users, or users that generally use the mouse to interact
    						with UI, a typical way to interact with the button is to position the
    						mouse pointer over the element, and click the left mouse button. However,
    						the <code>Button</code> also supports a built-in key handling behavior,
    						whereby either the SPACE or ENTER keys are treated as an equivalent
    						action to clicking the button with a mouse. The requirement for this
    						interaction is that the <code>Button</code> must have keyboard
    						focus at the point in time that SPACE or ENTER are pressed. The <code>Button</code> might
    						gain focus because the user pressed the TAB key to move through the
    						tab sequence, or some equivalent action enabled by assistive technology.
    						In terms of the programming experience, the Silverlight application
    						author does not have to separately handle <code>KeyDown</code> for
    						this case. Within the <code>Button</code> control built-in code,
    						the special case of SPACE or ENTER keys pressed while a <code>Button</code> has
    						focus invokes the button’s <code>Click</code> event. Then the Silverlight
    						application author can simply handle <code>Click</code> without
    						differentiating whether the input action was a mouse click or a keyboard
    						equivalent. The following is the entire XAML UI. </p><div class="code"><pre><code>&lt;UserControl x:Class="BuiltInKeyEquivalence.MainPage"
   xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
   xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
&gt;
   &lt;Grid x:Name="LayoutRoot" Background="White" Loaded="LayoutRoot_Loaded"&gt;
       &lt;Button Name="button1"
   AutomationProperties.Name="Equivalence test"
   Height="20" Width="150"
   Click="button1_Click"&gt;Click me, or press SPACE!&lt;/Button&gt;
   &lt;/Grid&gt;
&lt;/UserControl&gt;
</code></pre></div><p>The following is the C# logic. </p><div class="code"><pre><code>   private void button1_Click(object sender, RoutedEventArgs e)
   {
       MessageBox.Show("You clicked a button ... or maybe you hit the space bar ... or ENTER ... it's all the same to me.");
   }
   private void LayoutRoot_Loaded(object sender, RoutedEventArgs e)
   {
       System.Windows.Browser.HtmlPage.Plugin.Focus();
    }
</code></pre></div><p>This example is shown in operation in the <a href="https://www.w3.org/WAI/WCAG20/Techniques/working-examples/SL9/BuiltInKeyEquivalenceTestPage.html">
                    working example of built-in keyboard equivalents</a>.</p></div></div><h3 class="small-head" id="SL9-ex2">事例 2: Keyboard events for a custom control, keyboard equivalence</h3><div class="example"><div class="textbody"><p>In this example, a new Silverlight custom control named SimpleNumericUpDown
    						uses a control template that includes two buttons. To provide keyboard
    						equivalence for the buttons, an event handler is defined by the control
    						class code. The event handler invokes the action in response to certain
    						accelerator keys, where these actions are equivalent to clicking the
    						button composition parts of the control with a mouse. The following
    						is the default XAML template. </p><div class="code"><pre><code>&lt;ControlTemplate TargetType="local:SimpleNumericUpDown"&gt;
  &lt;Border Background="{TemplateBinding Background}"
          BorderBrush="{TemplateBinding BorderBrush}"
          BorderThickness="{TemplateBinding BorderThickness}" Name="controlFrame"&gt;
      &lt;Grid&gt;
          &lt;Grid.ColumnDefinitions&gt;
              &lt;ColumnDefinition Width="*"/&gt;
              &lt;ColumnDefinition Width="30"/&gt;
          &lt;/Grid.ColumnDefinitions&gt;
          &lt;TextBox x:Name="valueBox" Text="{Binding NumericValue, RelativeSource={RelativeSource TemplatedParent}}"/&gt;
          &lt;StackPanel Grid.Column="1"&gt;
              &lt;Button Name="minusButton"&gt;-&lt;/Button&gt;
              &lt;Button Name="plusButton"&gt;+&lt;/Button&gt;
          &lt;/StackPanel&gt;
      &lt;/Grid&gt;
  &lt;/Border&gt;
&lt;/ControlTemplate&gt;
</code></pre></div><p>The following C# code shows the event handlers. Also, the code includes
    						the event-wiring technique that is used whenever a Silverlight control
    						author implements a templateable control. This technique enables
    						the separation of UI appearance (which can be overridden) from the
    						input event-handling behavior (which is implemented by the control
    						author). </p><div class="code"><pre><code>   public class SimpleNumericUpDown : Control
   {
       public SimpleNumericUpDown()
       {
           this.DefaultStyleKey = typeof(SimpleNumericUpDown);
       }
       
       public override void OnApplyTemplate()
       {
           base.OnApplyTemplate();
           Button plusButton = GetTemplateChild("plusButton") as Button;
           Button minusButton = GetTemplateChild("minusButton") as Button;
           Border controlFrame = GetTemplateChild("controlFrame") as Border;
           plusButton.Click += new RoutedEventHandler(Increment);
           minusButton.Click += new RoutedEventHandler(Decrement);
           controlFrame.KeyUp += new KeyEventHandler(Handle_Accelerators);
       }
       private void Increment(object sender, RoutedEventArgs e)
       {
           this.NumericValue += 1;
       }
       private void Decrement(object sender, RoutedEventArgs e)
       {
           this.NumericValue -= 1;
       }
       private void Handle_Accelerators(object sender, KeyEventArgs e)
       {
           switch (e.Key)
           {
               case (Key.Left):
                   this.NumericValue -= 1; 
                   e.Handled=true;
                   break;
               case (Key.Right):
                   this.NumericValue += 1; 
                   e.Handled=true;
                   break;
               default: break;
           }
       }
       public Int32 NumericValue //definition omitted in this example
   }
</code></pre></div><p>This example is shown in operation in the <a href="/WAI/WCAG20/Techniques/working-examples/SL6/SimpleNumericUpDownTestPage.html">working example of custom keyboard events</a>.</p></div></div><h2 id="SL9-resources">参考リソース</h2><div class="textbody"><p>この参考リソースは、あくまでも情報提供のみが目的であり、推薦などを意味するものではない。</p><ul><li><p>
                  <a href="https://msdn.microsoft.com/en-us/library/system.windows.uielement.keyup%28VS.95%29.aspx">KeyUp</a> 
               </p></li><li><p>
                  <a href="https://msdn.microsoft.com/en-us/library/cc189015(VS.95).aspx">Keyboard
    					Support</a> 
               </p></li><li><p>
                  <a href="https://msdn.microsoft.com/en-us/library/cc903954(VS.95).aspx">Focus
    					Overview</a> 
               </p></li><li><p>
                  <a href="https://msdn.microsoft.com/en-us/library/cc278064(VS.95).aspx">Creating
    					a New Control by Creating a ControlTemplate</a> 
               </p></li><li><p>
                  <a href="https://msdn.microsoft.com/en-us/library/cc189018(VS.95).aspx">Events
    						Overview for Silverlight</a> 
               </p></li></ul></div><h2 id="SL9-related-techs">関連する達成方法</h2><div class="textbody"><ul><li><a href="G90.html">G90: キーボードがトリガーとなるイベントハンドラを提供する</a></li></ul></div><h2 id="SL9-tests">検証</h2><div class="textbody"><h3 class="small-head" id="SL9-procedure">手順</h3><ol class="enumar"><li><p> Using a browser that supports Silverlight, open an HTML page that
    					references a Silverlight application through an object tag. </p></li><li><p> Press TAB key to move keyboard focus to various element parts
    						of the user interface. </p></li><li><p> Verify that any user interface actions that exist for a given
    							element part each have a keyboard equivalent. </p></li></ol><h3 class="small-head" id="SL9-results">判定基準</h3><p>#3 is true. </p><p>この達成方法が「十分な達成方法」の一つである場合、この手順や判定基準を満たしていなければ、それはこの達成方法が正しく用いられていないことを意味するが、必ずしも達成基準を満たしていないことにはならない。場合によっては、別の達成方法によってその達成基準が満たされていることもありうる。</p></div><!-- BOTTOM NAVIGATION BAR --><ul id="navigationbottom"><li><strong><a href="#top">このページの先頭へ</a></strong></li><li><strong><a href="Overview.html#contents" title="Table of Contents">目次</a></strong></li><li><strong><a href="intro.html" title="Introduction to Techniques for WCAG 2.0"><abbr title="Introduction">イントロダクション</abbr></a></strong></li><li><a title="SL8: Displaying HelpText in Silverlight User Interfaces" href="SL8.html"><strong>前: </strong>
        達成方法 SL8</a></li><li><a title="SL10: Implementing a Submit-Form Pattern in Silverlight" href="SL10.html"><strong>次: </strong>
        達成方法 SL10</a></li></ul><div class="footer"><p class="copyright">このウェブページは、<a href="Overview.html">WCAG 2.0 達成方法集: WCAG 2.0 の達成方法と失敗例</a> (<a href="https://www.w3.org/TR/WCAG20-TECHS/SL9.html">この文書の最新版 (英語)</a> を参照してください) の一部です。文書全体を<a href="complete.html">単一 HTML ファイルにしたもの</a>もご利用いただけます。この文書と、Web Content Accessibility Guidelines (WCAG) 2.0 に関連する他の文書との関係については、<a href="http://www.w3.org/WAI/intro/wcag20">The WCAG 2.0 Documents</a> をご覧ください。パブリックコメントを送るには、<a href="http://www.w3.org/WAI/WCAG20/comments/">Instructions for Commenting on WCAG 2.0 Documents</a> に従ってください。</p><p class="copyright"><a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2016 <a href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href="http://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). W3C <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="https://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply.</p><p>【注意】 この文書は、W3C ワーキンググループノート <a href="https://www.w3.org/TR/2016/NOTE-WCAG20-TECHS-20161007/">Techniques for WCAG 2.0 の 2016 年 10 月 7 日時点での最新版</a>を<a href="https://waic.jp/committee/wg4/">ウェブアクセシビリティ基盤委員会 (WAIC)</a> が翻訳して公開しているものです。この文書の正式版は、W3C のサイトにある英語版です。正確な内容については、W3C が公開している原文 (英語) をご確認ください。この翻訳文書はあくまで参考情報であり、翻訳上の誤りが含まれていることがあります。翻訳上の誤りを見つけられた場合は、<a href="https://waic.jp/contact/">翻訳に関するお問い合わせ</a>からご連絡ください。</p><p>【重要】 達成方法のタイトルが英語のままになっているものは、日本語訳を行っていないため、原文 (英語) にリンクしています。</p></div></body></html>